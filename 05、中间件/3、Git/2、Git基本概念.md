[TOC]

# Git原理

## 基于版本快照工作

Git 更像是把数据看作是对小型文件系统的一组快照。 每次你提交更新，或在 Git 中保存项目状态时，它主要对当时的全部文件制作一个快照并保存这个快照的索引。 为了高效，如果文件没有修改，Git 不再重新存储该文件，而是只保留一个链接指向之前存储的文件。 Git 对待数据更像是一个快照流。

![](https://gitee.com/sxhDrk/images/raw/master/imgs/Git版本库.jpeg)



## 保证数据完整性

Git 中所有数据在存储前都计算校验和，然后以校验和来引用。这个功能建构在 Git 底层，是构成 Git 哲学不可或缺的部分。 若你在传送过程中丢失信息或损坏文件，Git 就能发现。

Git 用以计算校验和的机制叫做 `SHA-1` 散列（hash，哈希）。 这是一个由 40 个十六进制字符（0-9 和 a-f）组成字符串，基于 Git 中文件的内容或目录结构计算出来。 SHA-1 哈希看起来是这样

- `24b9da6552252987aa493b52f8696cd6d3b00373`

Git 中使用这种哈希值的情况很多，你将经常看到这种哈希值。 实际上，Git 数据库中保存的信息都是以==文件内容的哈希值来索引，而不是文件名==



## 一般只添加数据，不用担心版本丢失

你执行的 Git 操作，几乎只往 Git 数据库中增加数据。 很难让 Git 执行任何不可逆操作，或者让它以任何方式清除数据。 同别的 版本控制工具一样，未提交更新时有可能丢失或弄乱修改的内容；但是一旦你提交快照到 Git 中，就难以再丢失数据，特别是如果你定期的推送数据库到其它仓库的话。

这使得我们使用 Git 成为一个安心愉悦的过程，因为我们深知可以尽情做各种尝试，而没有把事情弄糟的危险。



# 版本库

> 分为：工作区、暂存区、分支区

![](https://gitee.com/sxhDrk/images/raw/master/imgs/Git基于快照工作.png)



## 版本库（仓库）

版本库又名仓库，英文名`repository`，你可以简单理解成一个目录，这个目录里面的所有文件都可以被Git管理起来，每个文件的==修改==、==删除==，Git都能跟踪，以便任何时刻都可以追踪历史，或者在将来某个时刻可以“还原”。

## 工作区

存放要管理的文件的位置

## 暂存区

版本库中包含暂存区

`git add fileName` 命令或`git rm fileName`命令的操作，被记录在暂存区内

## 分支区

版本库中 包含分支区 是最终版本信息保存的位置 `git commit`命令将暂存区内记录的操作 提交到分支中

可以配置多个分支，如果不指定则默认为master分支，并有一个`head指针`指向`master`分支的最新位置