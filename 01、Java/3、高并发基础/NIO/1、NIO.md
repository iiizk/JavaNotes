[TOC]



# 基本概念

## 同步和异步

- **同步**：在一个时间段内，一个对象或者一段逻辑只允许一个线程使用
- **异步**：在一个时间段内，一个对象或者一段逻辑允许多个线程使用

## 阻塞和非阻塞

- **阻塞**：在执行逻辑的时候，如果执行失败或者没有获取到结果就不往下执行，而是在此等待
- **非阻塞**：在指定逻辑的时间，如果执行失败或者没有获取到结果会抛出异常或者继续往下执行

## Java中IO分类

- BIO：BlockingIO，同步阻塞式IO
- NIO：官方名称：NewIO，常称为NonBlockingIO，同步非阻塞式IO（JDK1.4出现）
- AIO：AsynchronoursIO，异步非阻塞式IO。JDK1.8出现，在NIO基础上做了改进，所以也将AIO称之为NIO.2，表示NIO的第二个版本

## IO作用

用于完成数据的传输

## ==NIO组件==

NIO包含了三大组件：

- Buffer
- Channel
- Selector

# BIO的缺点

## 阻塞

在读取数据的时候，只要读取不到就会一直等待

再写入数据的时候，如果写不出去也会一直等待

## 一对一连接

客户端每次发起一次连接，服务器端都需要创建一个线程接受、处理这个连接。

如果产生大量的客户端，导致服务器端产生大量的线程，服务器端一旦线程过多，就会导致服务器端==卡顿甚至崩溃==

## 存在无用连接

如果一个连接建立之后保持连接，但是不做任何操作，导致服务器端对应的线程无法释放。如果产生大量的无用连接，就会导致服务器端的线程不断的被占用，导致资源造成浪费

## 单向传输

读取数据需要创建输入流，写出数据需要创建输出流，也就意味着完成一次传输需要创建多个流，导致产生多个对象，致使服务器资源浪费



# BIO和NIO的比较

| BIO                      | NIO                          |
| ------------------------ | ---------------------------- |
| 同步阻塞                 | 同步非阻塞                   |
| 单向传输数据             | 可以双向传输数据             |
| 一对一的连接方式         | 一对多的连接方式             |
| 面向流操作               | 面向缓冲区操作               |
| 适合于请求少、长连接场景 | 适合于大量请求、短连接的场景 |



# NIO图解

![](https://gitee.com/sxhDrk/images/raw/master/imgs/20210427111257.png)